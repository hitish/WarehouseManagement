{% extends 'base.html' %}

{% block title %}
	<h1 class="display-2 justify-content-center">Add Checked Stock</h1>
{% endblock title %}

{% block content %}
    
<form class="row gx-5" action = "" method = "post" enctype="multipart/form-data">
	{% csrf_token %}

	<div class="form-floating mb-3 row">
		<input type="text" class="form-control" name="product_id" maxlength="100"  id="id_product_id">
		<label class="col-sm-2 col-form-label" for="id_purchase_id">Purchase id:</label>
	</div>
	<div class="form-floating mb-3 row">
		<input type="text" class="form-control" name="name" id="id_name" maxlength="200" >
		<label class="col-sm-2 col-form-label" for="id_name">Product Name:</label>
	</div>
	<div class="row mb-3">
		<div class="form-floating col-6">
			<input type="text" class="form-control" name="brand" id="id_brand" list="brandname">
			<datalist id="brandname">
				{%for brand in brands %}
					<option value="{{brand.brand_name}}">
				{% endfor %}
			</datalist>
			<label class="col-sm-2 col-form-label" for="id_brand">Brand Name:</label>
		</div>
		<div class="form-floating col-6">
			<input type="text" class="form-control" name="category" id="id_category" list="catname">
			<datalist id="catname">
				{%for cat in categories %}
					<option value="{{cat.category_name}}">
				{% endfor %}
			</datalist>
			<label class="col-sm-2 col-form-label" for="id_category">Category Name:</label>
		</div>
	</div>
	<div class="row mb-3">
		<div class="form-floating col-3">
			<input type="number" class="form-control" name="cosp" id="id_cosp" min="0" readonly >
			<label class="col-sm-2 col-form-label" for="id_cosp">Current OSP:</label>
		</div>

		<div class="form-floating col-3">
			<input type="number" class="form-control" name="mrp" id="id_mrp" min="0" >
			<label class="col-sm-2 col-form-label" for="id_mrp">MRP:</label>
		</div>

		<div class="form-floating col-3">
			<input type="number" class="form-control" name="mbp" id="id_mbp" min="0" >
			<label class="col-sm-2 col-form-label" for="id_mbp">MBP:</label>
		</div>

		<div class="form-floating col-3">
			<select class="form-select" name="qc_status" id="id_qc_status" style="padding-left:45px" >
				{%for qc_status in qc_status_list %}
					<option value="{{qc_status.id}}">{{qc_status.qc_status}}</option>
				{% endfor %}
			</select>
			<label class="col-sm-2 col-form-label" for="id_qc_status">Qc Status:</label>
		</div>
	</div>
	<input type="submit" value="Add Product">
</form>

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
  $("#id_product_id").change(function () {
	
	var product_id = $(this).val();  // get the selected country ID from the HTML input
	console.log(product_id)
	var purl = "/product/add_checked_stock/".product_id
	var settings = {
		"url": purl,
		"method": "GET",
		"timeout": 0,
	  };
	  console.log(settings);

	  $.ajax(settings).done(function (response) {
		//console.log(response);
	  });

	

  });
</script>
{% endblock content %}
